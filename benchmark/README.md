# 性能基准测试

本目录包含本地日志查看工具的性能基准测试，用于评估系统在不同负载下的表现。

## 测试类型

### 1. 吞吐量测试
- API 请求处理能力
- 并发连接处理
- WebSocket 消息处理

### 2. 延迟测试
- API 响应时间
- 搜索查询延迟
- 文件读取延迟

### 3. 资源使用测试
- 内存使用情况
- CPU 使用率
- 磁盘 I/O 性能

### 4. 扩展性测试
- 大文件处理能力
- 多文件并发处理
- 长时间运行稳定性

## 运行基准测试

```bash
# 运行所有基准测试
go test ./benchmark/... -bench=. -benchmem

# 运行特定测试
go test ./benchmark -bench=BenchmarkLogReading -benchmem

# 生成性能报告
go test ./benchmark -bench=. -benchmem -cpuprofile=cpu.prof -memprofile=mem.prof

# 分析性能数据
go tool pprof cpu.prof
go tool pprof mem.prof
```

## 测试环境

- **硬件**: 推荐使用一致的硬件环境进行测试
- **数据**: 使用标准化的测试数据集
- **负载**: 模拟真实的使用场景

## 性能指标

### 目标性能指标

- **API 响应时间**: < 100ms (P95)
- **搜索延迟**: < 500ms (大文件)
- **并发连接**: > 1000 个 WebSocket 连接
- **内存使用**: < 512MB (正常负载)
- **CPU 使用**: < 50% (正常负载)

### 基准数据

| 测试场景 | 文件大小 | 响应时间 | 内存使用 | CPU 使用 |
|---------|---------|---------|---------|---------|
| 小文件读取 | 1MB | 10ms | 50MB | 5% |
| 大文件读取 | 100MB | 50ms | 200MB | 20% |
| 搜索查询 | 100MB | 200ms | 300MB | 30% |
| 实时更新 | - | 5ms | 100MB | 10% |